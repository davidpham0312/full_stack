{"version":3,"sources":["services/person.js","components/Filter.js","components/PersonForm.js","components/Persons.js","App.js","index.js"],"names":["url","axios","get","then","response","data","post","id","delete","newContact","put","Filter","searchHandler","type","onChange","PersonForm","addPerson","newName","handleNameChange","handleNumberChange","newNumber","onSubmit","value","Persons","searchResult","toggleDelete","map","person","name","number","onClick","Notification","message","style","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","App","useState","persons","setPersons","setNewName","setNewNumber","newSearch","setNewSearch","setSearchResult","setMessage","useEffect","personService","results","filter","toLowerCase","includes","event","target","preventDefault","listCheck","length","window","confirm","updatedPerson","updatedList","p","catch","error","concat","del","console","log","remain","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.02ff5a2b.chunk.js","sourcesContent":["import axios from 'axios'\nconst url = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(url)\n  return request.then(response => response.data)\n}\n\nconst saveAdded = data => {\n  const request = axios.post(url, data)\n  return request.then(response => response.data)\n}\n\nconst deletePerson = (id) => {\n  const request = axios.delete(`${url}/${id}`)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newContact) => {\n  const request = axios.put(`${url}/${id}`, newContact)\n  return request.then(response => response.data)\n}\n\nexport default {\n  getAll, saveAdded, deletePerson, update\n}","import React from 'react'\n\nconst Filter = ({searchHandler}) => (\n\n    <p>Filter shown with <input type='text' onChange={searchHandler}/></p>\n  \n)\n\nexport default Filter","import React from 'react'\n\nconst PersonForm = ({addPerson, newName, handleNameChange, handleNumberChange, newNumber}) => {\n  return (\n    <form onSubmit = {addPerson}>\n    <div>name: <input value={newName} onChange={handleNameChange}/></div>\n    <div>number: <input value={newNumber} onChange={handleNumberChange}/></div>\n    <div><button type=\"submit\">add</button></div>\n  </form>\n  )\n}\n\nexport default PersonForm","import React from 'react'\n\nconst Persons = ({searchResult, toggleDelete}) => {\n  return (\n    <div>\n      {searchResult.map(person => \n      <div key={person.name}>\n        {person.name} {person.number}\n        <button onClick={() => toggleDelete(person.id)}>delete</button>\n      </div>)}\n    </div>\n  )\n}\n\nexport default Persons","import personService from './services/person'\nimport React, { useState, useEffect } from 'react'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n  const notiStyle = {\n    color: 'green',\n    background: 'lightgrey',\n    fontSize: 20,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10,\n  }\n  return (\n    <div style={notiStyle}>\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newSearch, setNewSearch] = useState('')\n  const [Â searchResult, setSearchResult] = useState([])\n  const [ message, setMessage] = useState('')\n\n  useEffect(() => {\n    personService\n    .getAll()\n    .then(response => {\n      setPersons(response)\n    })\n  }, [])\n\n  const handleSearchChange = (event) =>{\n    setNewSearch(event.target.value)\n  }\n  const addPerson = (event) => {\n    event.preventDefault()\n    const data = {\n      name: newName,\n      number: newNumber\n    }\n\n    const listCheck = persons.filter(person => person.name.toLowerCase() === newName.toLowerCase())\n    if (listCheck.length === 1) {\n      const newContact = {...listCheck[0], number: newNumber}\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        personService.update(listCheck[0].id, newContact)\n        .then(updatedPerson => {\n          let updatedList = persons.filter(p => p.id !== updatedPerson.id)\n          updatedList = [...updatedList, updatedPerson]\n          setPersons(updatedList)\n          setNewName('')\n          setNewNumber('')\n          setMessage(`Added ${newName}`)\n        })\n        .catch(error => {\n          setMessage(`Information of ${newName} has already been removed from server`)\n          setPersons(persons.filter(p => p.id !== listCheck[0].id))\n        })\n      }\n    }\n    else {\n\n      personService\n        .saveAdded(data)\n        .then(response => {\n          setMessage(`Added ${data.name}`)\n          setPersons(persons.concat(response))\n          setNewName('')\n          setNewNumber('')\n          setSearchResult(searchResult.concat(data))\n        })\n        .catch(error => {  \n          setMessage(error.response.data.error)\n        })\n    }\n  }\n\n  const toggleDelete = id => {\n    const del = searchResult.filter(person => id === person.id)\n    console.log(del)\n    const remain = searchResult.filter(person => id !== person.id)\n    if (window.confirm(`Delete ${del[0].name}?`)) {\n        personService.deletePerson(id).then(response => setPersons(remain))\n        setMessage(`deleted ${del.name}`)\n    }\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  useEffect(() => {\n    const results = persons.filter(person => person.name.toLowerCase().includes(newSearch));\n      setSearchResult(results)\n    }, [persons,newSearch]);\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message}/>\n      <Filter searchHandler={handleSearchChange}/>\n      <h3>add a new</h3>\n      <PersonForm \n        addPerson={addPerson} \n        newName={newName} \n        handleNameChange={handleNameChange} \n        handleNumberChange={handleNumberChange} \n        newNumber={newNumber}/>\n      <h3>Numbers</h3>\n      <Persons searchResult={searchResult}\n               toggleDelete={toggleDelete}/>\n    </div>\n  )\n}\n\nexport default App","import ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}