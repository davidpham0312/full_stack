(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{ 23:function(e,n,t){},43:function(e,n,t){'use strict';t.r(n);var c=t(17),r=t.n(c),a=(t(23),t(18)),o=t(8),u=t(3),i=t(5),d=t.n(i),s='/api/persons',b=function(){return d.a.get(s).then((function(e){return e.data}))},l=function(e){return d.a.post(s,e).then((function(e){return e.data}))},j=function(e){return d.a.delete(''.concat(s,'/').concat(e)).then((function(e){return e.data}))},f=function(e,n){return d.a.put(''.concat(s,'/').concat(e),n).then((function(e){return e.data}))},h=t(1),O=t(0),m=function(e){var n=e.searchHandler;return Object(O.jsxs)('p',{ children:['Filter shown with ',Object(O.jsx)('input',{ type:'text',onChange:n })] })},v=function(e){var n=e.addPerson,t=e.newName,c=e.handleNameChange,r=e.handleNumberChange,a=e.newNumber;return Object(O.jsxs)('form',{ onSubmit:n,children:[Object(O.jsxs)('div',{ children:['name: ',Object(O.jsx)('input',{ value:t,onChange:c })] }),Object(O.jsxs)('div',{ children:['number: ',Object(O.jsx)('input',{ value:a,onChange:r })] }),Object(O.jsx)('div',{ children:Object(O.jsx)('button',{ type:'submit',children:'add' }) })] })},g=function(e){var n=e.searchResult,t=e.toggleDelete;return Object(O.jsx)('div',{ children:n.map((function(e){return Object(O.jsxs)('div',{ children:[e.name,' ',e.number,Object(O.jsx)('button',{ onClick:function(){return t(e.id)},children:'delete' })] },e.name)})) })},p=function(e){var n=e.message;if(null===n)return null;return Object(O.jsx)('div',{ style:{ color:'green',background:'lightgrey',fontSize:20,borderStyle:'solid',borderRadius:5,padding:10,marginBottom:10 },children:n })},x=function(){var e=Object(h.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],r=Object(h.useState)(''),i=Object(u.a)(r,2),d=i[0],s=i[1],x=Object(h.useState)(''),w=Object(u.a)(x,2),C=w[0],N=w[1],S=Object(h.useState)(''),k=Object(u.a)(S,2),y=k[0],D=k[1],E=Object(h.useState)([]),L=Object(u.a)(E,2),P=L[0],R=L[1],A=Object(h.useState)(''),B=Object(u.a)(A,2),H=B[0],I=B[1];Object(h.useEffect)((function(){b().then((function(e){c(e)}))}),[]);return Object(h.useEffect)((function(){var e=t.filter((function(e){return e.name.toLowerCase().includes(y)}));R(e)}),[t,y]),Object(O.jsxs)('div',{ children:[Object(O.jsx)('h2',{ children:'Phonebook' }),Object(O.jsx)(p,{ message:H }),Object(O.jsx)(m,{ searchHandler:function(e){D(e.target.value)} }),Object(O.jsx)('h3',{ children:'add a new' }),Object(O.jsx)(v,{ addPerson:function(e){e.preventDefault();var n={ name:d,number:C },r=t.filter((function(e){return e.name.toLowerCase()===d.toLowerCase()}));if(1===r.length){var u=Object(o.a)(Object(o.a)({},r[0]),{},{ number:C });window.confirm(''.concat(d,' is already added to phonebook, replace the old number with a new one?'))&&f(r[0].id,u).then((function(e){var n=t.filter((function(n){return n.id!==e.id}));n=[].concat(Object(a.a)(n),[e]),c(n),s(''),N(''),I('Added '.concat(d))})).catch((function(e){I('Information of '.concat(d,' has already been removed from server')),c(t.filter((function(e){return e.id!==r[0].id})))}))}else l(n).then((function(e){I('Added '.concat(n.name)),c(t.concat(e)),s(''),N(''),R(P.concat(n))})).catch((function(e){I(e.response.data.error)}))},newName:d,handleNameChange:function(e){s(e.target.value)},handleNumberChange:function(e){N(e.target.value)},newNumber:C }),Object(O.jsx)('h3',{ children:'Numbers' }),Object(O.jsx)(g,{ searchResult:P,toggleDelete:function(e){var n=P.filter((function(n){return e===n.id}));console.log(n);var t=P.filter((function(n){return e!==n.id}));window.confirm('Delete '.concat(n[0].name,'?'))&&(j(e).then((function(e){return c(t)})),I('deleted '.concat(n.name)))} })] })};r.a.render(Object(O.jsx)(x,{}),document.getElementById('root'))} },[[43,1,2]]])
//# sourceMappingURL=main.02ff5a2b.chunk.js.map